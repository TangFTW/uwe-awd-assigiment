<div class="create-post">
	<header class="create-post__header">
		<div>
			<h2 class="create-post__title">Create New Record</h2>
			<p class="create-post__subtitle">Create Mobile post office. Make sure it exists in Hong Kong.</p>
		</div>

		<button class="create-post__close btn btn-secondary" type="button" (click)="close()">
			Close
		</button>
	</header>

	<div class="create-post__card">
		<form class="create-post__form" [formGroup]="form" (ngSubmit)="submit()">
			<div class="create-post__grid">
				<div class="field">
					<label class="field__label" for="mobileCode">Mobile Code <span class="field__req">*</span></label>
					<input
						id="mobileCode"
						formControlName="mobileCode"
						class="field__input"
						[class.field__input--error]="hasError('mobileCode')"
						placeholder="e.g. M001"
						autocomplete="off"
					/>
					@if (hasError('mobileCode')) {
						<div class="field__error">{{ getErrorMessage('mobileCode') }}</div>
					}
					<div class="field__help">Unique mobile post office code.</div>
				</div>

				<div class="field">
					<label class="field__label" for="dayOfWeekCode">Day Of Week (1–7) <span class="field__req">*</span></label>
					<input
						id="dayOfWeekCode"
						formControlName="dayOfWeekCode"
						type="number"
						min="1"
						max="7"
						class="field__input"
						[class.field__input--error]="hasError('dayOfWeekCode')"
					/>
					@if (hasError('dayOfWeekCode')) {
						<div class="field__error">{{ getErrorMessage('dayOfWeekCode') }}</div>
					}
					<div class="field__help">1=Mon … 7=Sun (based on your DB).</div>
				</div>

				<div class="field">
					<label class="field__label" for="seq">Seq <span class="field__req">*</span></label>
					<input
						id="seq"
						formControlName="seq"
						type="number"
						min="1"
						class="field__input"
						[class.field__input--error]="hasError('seq')"
					/>
					@if (hasError('seq')) {
						<div class="field__error">{{ getErrorMessage('seq') }}</div>
					}
					<div class="field__help">Must be unique per mobileCode + day combination.</div>
				</div>

				<div class="field">
					<label class="field__label" for="nameEN">Name (EN)</label>
					<input
						id="nameEN"
						formControlName="nameEN"
						class="field__input"
						placeholder="Optional"
					/>
				</div>

				<div class="field">
					<label class="field__label" for="nameTC">Name (TC)</label>
					<input
						id="nameTC"
						formControlName="nameTC"
						class="field__input"
						placeholder="Name (Traditional Chinese)"
					/>
				</div>

				<div class="field">
					<label class="field__label" for="districtEN">District (EN) <span class="field__req">*</span></label>
					<input
						id="districtEN"
						formControlName="districtEN"
						class="field__input"
						[class.field__input--error]="hasError('districtEN')"
						placeholder="e.g. Tsuen Wan"
					/>
					@if (hasError('districtEN')) {
						<div class="field__error">{{ getErrorMessage('districtEN') }}</div>
					}
				</div>

				<div class="field">
					<label class="field__label" for="districtTC">District (TC)</label>
					<input
						id="districtTC"
						formControlName="districtTC"
						class="field__input"
						placeholder="District (Traditional Chinese)"
					/>
				</div>

				<div class="field">				<label class="field__label" for="districtSC">District (SC)</label>
				<input
					id="districtSC"
					formControlName="districtSC"
					class="field__input"
					placeholder="District (Simplified Chinese)"
				/>
			</div>

			<div class="field">					<label class="field__label" for="locationEN">Location (EN) <span class="field__req">*</span></label>
					<input
						id="locationEN"
						formControlName="locationEN"
						class="field__input"
						[class.field__input--error]="hasError('locationEN')"
						placeholder="e.g. Sham Tseng"
					/>
					@if (hasError('locationEN')) {
						<div class="field__error">{{ getErrorMessage('locationEN') }}</div>
					}
				</div>

				<div class="field">
					<label class="field__label" for="locationTC">Location (TC)</label>
					<input
						id="locationTC"
						formControlName="locationTC"
						class="field__input"
						placeholder="Location (Traditional Chinese)"
					/>
				</div>
			<div class="field">
				<label class="field__label" for="locationSC">Location (SC)</label>
				<input
					id="locationSC"
					formControlName="locationSC"
					class="field__input"
					placeholder="Location (Simplified Chinese)"
				/>
			</div>
				<div class="field field--full">
					<label class="field__label" for="addressEN">Address (EN) <span class="field__req">*</span></label>
					<input
						id="addressEN"
						formControlName="addressEN"
						class="field__input"
						[class.field__input--error]="hasError('addressEN')"
						placeholder="Full street address"
					/>
					@if (hasError('addressEN')) {
						<div class="field__error">{{ getErrorMessage('addressEN') }}</div>
					}
				</div>

				<div class="field field--full">
					<label class="field__label" for="addressTC">Address (TC)</label>
					<input
						id="addressTC"
						formControlName="addressTC"
						class="field__input"
						placeholder="Address (Traditional Chinese)"
					/>
				</div>
			<div class="field field--full">
				<label class="field__label" for="addressSC">Address (SC)</label>
				<input
					id="addressSC"
					formControlName="addressSC"
					class="field__input"
					placeholder="Address (Simplified Chinese)"
				/>
			</div>
				<div class="field">
					<label class="field__label" for="openHour">Open Hour <span class="field__req">*</span></label>
					<input
						id="openHour"
						formControlName="openHour"
						class="field__input"
						[class.field__input--error]="hasError('openHour')"
					placeholder="09:00:00"
					inputmode="numeric"
					autocomplete="off"
				/>
				@if (hasError('openHour')) {
					<div class="field__error">{{ getErrorMessage('openHour') }}</div>
				}
				<div class="field__help">Format: HH:MM:SS</div>
			</div>

			<div class="field">
				<label class="field__label" for="closeHour">Close Hour <span class="field__req">*</span></label>
				<input
					id="closeHour"
					formControlName="closeHour"
					class="field__input"
					[class.field__input--error]="hasError('closeHour')"
					placeholder="17:00:00"
					inputmode="numeric"
					autocomplete="off"
				/>
				@if (hasError('closeHour')) {
					<div class="field__error">{{ getErrorMessage('closeHour') }}</div>
				}
				<div class="field__help">Format: HH:MM:SS</div>
			</div>

			<div class="field">
				<label class="field__label" for="latitude">Latitude</label>
				<input
					id="latitude"
					type="number"
					step="0.000001"
					class="field__input"
					formControlName="latitude"
					placeholder="22.123456"
				/>
				<div class="field__help">GPS latitude coordinate (decimal)</div>
			</div>

			<div class="field">
					<label class="field__label" for="longitude">Longitude</label>
					<input
						id="longitude"
						formControlName="longitude"
						type="number"
						step="0.000001"
						class="field__input"
						placeholder="114.123456"
					/>
					<div class="field__help">GPS longitude coordinate (decimal)</div>
				</div>
			</div>

			<div class="create-post__actions">
				<button class="btn btn-primary" type="submit" [disabled]="loading() || form.invalid">
					{{ loading() ? 'Creating…' : 'Create Record' }}
				</button>
				<button class="btn btn-secondary" type="button" (click)="reset()" [disabled]="loading()">
					Reset
				</button>
			</div>

			@if (error()) {
				<div class="alert alert--error">{{ error() }}</div>
			}

			@if (message()) {
				<div class="alert alert--success">
					{{ message() }}
					@if (createdId()) {
						<span> (ID: {{ createdId() }})</span>
					}
				</div>
			}
		</form>
	</div>
</div>
